{% from "govuk/components/cookie-banner/macro.njk" import govukCookieBanner %}

{% if not messages.cookies and not acceptAnalyticsCookies %}
  {% set html %}
  <p class="govuk-body">We use some essential cookies to make this service work.</p>
  <p class="govuk-body">We’d also like to use analytics cookies so we can understand how you use the service and make improvements.</p>
  {% endset %}

  <form action="/cookie-preferences" method="post">
    <input type="hidden" name="_csrf" value="{{ csrfToken }}"/>

    {{ govukCookieBanner({
      ariaLabel: "Cookies on Refer and monitor an intervention",
      messages: [
        {
          headingText: "Cookies on Refer and monitor an intervention",
          html: html,
          actions: [
            {
              text: "Accept analytics cookies",
              type: "submit",
              name: "acceptAnalyticsCookies",
              value: "true"
            },
            {
              text: "Reject analytics cookies",
              type: "submit",
              name: "acceptAnalyticsCookies",
              value: "false"
            },
            {
              text: "View cookies",
              href: "/cookie-policy"
            }
          ]
        }
      ]
    }) }}
  </form>

{% elseif messages.cookies and analyticsCookiesPreference %}
  {% set html %}
  <p class="govuk-body">You’ve {{ analyticsCookiesPreference }} additional cookies. You can <a class="govuk-link" href="/cookie-policy">change your cookie settings</a> at any time.</p>
  {% endset %}

  <form method="post">
    {{ govukCookieBanner({
      ariaLabel: "Cookies on Refer and monitor an intervention",
      messages: [
        {
          html: html,
          actions: [
          {
            text: "Hide cookie message",
            href: returnTo,
            type: "button"
          }
          ]
        }
      ]
    }) }}
  </form>
{% endif %}
